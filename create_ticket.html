<script>
document.querySelector('form').addEventListener('submit', async (e) => {
  e.preventDefault();

  const title = document.getElementById('title').value;
  const description = document.getElementById('description').value;
  const priority = document.getElementById('priority').value;
  const contact = document.getElementById('contact').value;

  // Store locally if you want
  const ticket = { title, description, priority, contact };
  localStorage.setItem('ticket', JSON.stringify(ticket));

  // Your Discord webhook URL
  const webhookURL = "https://discord.com/api/webhooks/1427062309540466829/CAVoGYo4CRUCOugkxYnVqLpasQtu8DgPGOZzQWl4CYfArLQ-a8UW2SinDdQFZwO7juyt";

  // Build message
  const message = {
    embeds: [
      {
        title: `ðŸŽ« New Ticket: ${title}`,
        color: 3447003,
        fields: [
          { name: "Priority", value: priority, inline: true },
          { name: "Contact", value: contact, inline: true },
          { name: "Description", value: description },
        ],
        timestamp: new Date().toISOString(),
      },
    ],
  };

  // Send to Discord
  const response = await fetch(webhookURL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(message),
  });

  if (response.ok) {
    alert("Ticket submitted! It has been sent to the Discord server.");
    window.location.href = "ticket_details.html";
  } else {
    alert("Error sending ticket to Discord.");
  }
});
</script>
